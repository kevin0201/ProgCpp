/*
 * Bibliographie.cpp
 *
 *  Created on: 2016-03-18
 *      Author: etudiant
 */

#include "Bibliographie.h"
#include "validationFormat.h"

#include <vector>
#include <iostream>
#include <string>
#include <sstream>

/**
 * \brief Constructeur de la classe Bibliographie.
 */
Bibliographie::Bibliographie() {
	// TODO Auto-generated constructor stub
}

/**
 * \brief Destructeur de la classe Bibliographie.
 */
Bibliographie::~Bibliographie() {
	// TODO Auto-generated destructor stub
}

/**
 * \brief Teste l'invariant de la classe Bibliographie.
 */
void Bibliographie::ajouterReference(const Reference& p_nouvelleReference) {
	m_vReferences.push_back(p_nouvelleReference.clone());
}

/**
 * \brief génère une bibliographie dans un format précis, composé de journaux et d'ouvrages.
 */
std::string Bibliographie::reqBibliographieFormate() const {
	std::ostringstream oss ;
	std::string ouvrage_formate;
	oss<<"Bibliographie"<<"\n";
	oss<<"=============================================="<<"\n";
	for (unsigned i = 0; i < m_vReferences.size(); i++)
	{
	oss << "["<<i+1<<"] "<<m_vReferences[i]->reqReferenceFormate() <<"\n";
	}
	ouvrage_formate=oss.str();
	return ouvrage_formate;
}

/**
 * \brief Suppression d'un element du vecteur, de la bibliographie
 *        On Supprime dans la bibliographie l'objet dont l'identifiant a été passé en paramètre
 * \param[in] p_identifiant est une chaine de caractère dont qui represente l'identifiant de l'objet qui sera supprimer
 * \post Objet a été supprimé la taille diminue de 1
 */
void Bibliographie::supprimerReference(const std::string& p_identifiant)
{
	PRECONDITION(validerCodeIsbn(p_identifiant) || validerCodeIssn(p_identifiant));

 for(int i = 1; i < m_vReferences.size(); i++)
 {
	 if (m_vReferences[i]->m_identifiant == p_identifiant)
	 {
		 m_vReferences.erase(m_vReferences.begin()+i-1);
	 }
 }
}

/**
 * \brief Teste l'invariant de la classe Bibliographie.
 */
void Bibliographie::verifieInvariant() const{

}

bool Bibliographie::ReferenceEstDejaPresente(const std::string p_identifiant) const
{

}
